#  development HTTPS server 
#  file: nginx-config/dev-server-port443.conf
#  features
#   - access log sent to journald systemd log `access_log syslog:server=unix:/dev/log;`
#     note: when developing follow both logs 
#  -  set server context globals  `set $site  $domain;`
#
##########################################################

server {
  listen 443      ssl http2 default_server;
  listen [::]:443 ssl http2 default_server;
  server_name  ~^(www\.)?(?<domain>.+)$;
  root html;
  index index.html;
  access_log syslog:server=unix:/dev/log;

# set globals for server context
#################################################
# TODO: most likely redundent
  set $site  $domain;

# TLS configuration
# file: nginx-config/tls.conf
#################################################
  include tls.conf;

 # phase: right before ssl handshake

  # PHASES
    # before locations insert server-rewrite phase
    #include serverRewrite.conf;
    # gf:  openresty/nginx/conf/serverRewrite.conf
    #include locationBlocks.conf;
    # gf:  openresty/nginx/conf/locationBlocks.conf
  location / {
  }
}
